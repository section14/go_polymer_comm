<dom-module id="category-breadcrumb">

    <style>
        ::host {
            display: inline;
        }
    </style>

    <template>
        <div id="bread_buttons"></div>
    </template>

    <script>

    Polymer({

        is: "category-breadcrumb",

        properties: {
            parentCategory: {
                type: Number,
                notify: true,
                observer: "depthChange"
            },

            parentName: {
                type: String,
                notify: true
            }
        },

        ready: function() {
            //breadcrumb array
            this.crumbList = [];
        },

        depthChange: function() {
            this.async(function() {
                this.manageBreadCrumb()
            }, 100);
        },

        manageBreadCrumb: function() {
            var matchCat = false;

            //check if this category is already in the list
            for (i=0; i<this.crumbList.length; i++)
            {
                if (this.parentCategory == this.crumbList[i])
                {
                    matchCat = true;
                }
            }

            //add new category
            if (matchCat == false)
            {
                this.addBreadCrumb();
            }
        },

        addBreadCrumb: function() {
            if (this.parentName != undefined && this.parentName != "")
            {
                //add category to id to breadcrumb list
                this.crumbList.push(this.parentCategory);

                var newButton = Polymer.Base.create(
                    "paper-button",
                    {"catId":this.parentCategory}
                );

                newButton.innerHTML = this.parentName;
                newButton.catId = this.parentCategory;
                newButton.addEventListener("tap",this.changeCategory.bind(this));

                //var model = 

                //create new breadcrumb button
                /*
                var newButton = document.createElement("paper-button");
                newButton.innerHTML = this.parentName;
                newButton.id = this.parentCategory;
                newButton.raised = true;
                newButton.addEventListener("tap",this.changeCategory.bind(this));
                */

                Polymer.dom(this.$.bread_buttons).appendChild(newButton);

            }
        },

        changeCategory: function(e) {
            //set local data model
            var model = e.model;

            //get item id's
            //var itemId = model.item.catId;

            console.log(e.catId);
        },

        deleteBreadCrumb: function() {

        }

    });

    </script>

</dom-module>
